---
const base = import.meta.env.BASE_URL;

const normalize = (p) => p.replace(/\/+$/, "");

const rawPath = Astro.url.pathname.startsWith(base)
  ? "/" + Astro.url.pathname.slice(base.length)
  : Astro.url.pathname;

const currentPath = normalize(rawPath);

const isActive = (path) => {
  path = normalize(path);
  if (path === "/") return currentPath === "/";
  return currentPath === path || currentPath.startsWith(path + "/");
};
---

<nav aria-label="Primary">
  <div class="nav-container">
    <a href={`${base}`} class="nav-brand">Animesh Singh</a>

    <ul class="nav-links">
      <li><a href={`${base}projects/`} aria-current={isActive("/projects") ? "page" : undefined}>Projects</a></li>
      <li><a href={`${base}photography/`} aria-current={isActive("/photography") ? "page" : undefined}>Photography</a></li>
      <li><a href={`${base}music/`} aria-current={isActive("/music") ? "page" : undefined}>Music</a></li>
      <li><a href={`${base}about/`} aria-current={isActive("/about") ? "page" : undefined}>About</a></li>
      <li><a href={`${base}contact/`} aria-current={isActive("/contact") ? "page" : undefined}>Contact</a></li>
    </ul>
  </div>
</nav>
